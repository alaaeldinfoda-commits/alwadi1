<!doctype html>
<html lang="ar" dir="rtl">
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>تسجيل الدخول</title>

  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.rtl.min.css" rel="stylesheet">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.0/css/all.min.css">

  <style>
    /* ====================== */
    /* Light / Dark Variables */
    :root {
      --bg: #f5f7fb;
      --card-bg: #fff;
      --text: #222;
      --subtext: #777;
      --input-bg: #fff;
      --input-border: #ccc;
      --shadow: 0 4px 10px rgba(0,0,0,.08);
    }
    @media (prefers-color-scheme: dark) {
      :root {
        --bg: #1d1f23;
        --card-bg: #2a2d31;
        --text: #eee;
        --subtext: #bbb;
        --input-bg: #3a3d42;
        --input-border: #555;
        --shadow: 0 4px 14px rgba(0,0,0,.5);
      }
    }

    body {
      background: var(--bg);
      display:flex;
      justify-content:center;
      align-items:center;
      min-height:100vh;
      padding:15px;
      font-family: 'Tajawal', sans-serif;
    }

     /* -------------------------------------------------- */
        /* 1) THEME COLOR SYSTEM                              */
        /* -------------------------------------------------- */

        :root {
            --bg: #f5f7fb;
            --card-bg: #fff;
            --text: #222;
            --sidebar-bg: #0d6efd;
            --sidebar-hover: rgba(255,255,255,0.15);
            --link: #fff;
            --border: #ddd;
        }

        [data-theme="dark"] {
            --bg: #1b1e23;
            --card-bg: #2a2e33;
            --text: #f1f1f1;
            --sidebar-bg: #0b5ed7;
            --sidebar-hover: rgba(0,0,0,0.2);
            --link: #fff;
            --border: #444;
        }

        body {
            background: var(--bg);
            color: var(--text);
            overflow-x: hidden;
            transition: background 0.4s, color 0.4s;
            animation: fadeIn 0.5s ease-in-out;
        }


    /* ====================== */
    /* Login Card */
    .login-card {
      background: var(--card-bg);
      width:100%;
      max-width:430px;
      padding:35px;
      border-radius:18px;
      box-shadow: var(--shadow);
      animation: fadeInUp .6s ease;
    }

    @keyframes fadeInUp {
      from { opacity:0; transform:translateY(20px); }
      to   { opacity:1; transform:translateY(0); }
    }

    .login-title {
      text-align:center;
      margin-bottom:20px;
      color: var(--text);
    }

    .login-logo {
      display:block;
      margin:auto;
      width:130px;
      margin-bottom:10px;
    }

    /* Inputs */
    .form-control {
      background: var(--input-bg);
      border:1px solid var(--input-border);
      color: var(--text);
      border-radius:10px;
      height:48px;
    }

    .form-control:focus {
      border-color:#0d6efd;
      box-shadow:0 0 0 0.15rem rgba(13,110,253,.25);
    }

    /* Password eye */
    .password-wrapper {
      position: relative;
    }

    .toggle-pass {
      position:absolute;
      left:12px;
      top:50%;
      transform:translateY(-50%);
      cursor:pointer;
      color: var(--subtext);
    }

    /* Login button */
    .btn-login {
      width:100%;
      height:48px;
      border-radius:10px;
      font-size:18px;
      font-weight:600;
    }

    .btn-login:hover {
      transform: scale(1.03);
    }
     .theme-toggle {
            font-size: 1.3rem;
            cursor: pointer;
            transition: transform 0.3s;
        }

        .theme-toggle:hover {
            transform: rotate(25deg);
        }

  /* ====================== */
  /* Gradient Background Animation */
      body {
    background: linear-gradient(135deg,#0d6efd,#6610f2);
    background-size:300% 300%;
    animation: gradientMove 6s ease infinite;
  }

  @keyframes gradientMove {
    0% { background-position:0% 50%; }
    50% { background-position:100% 50%; }
    100% { background-position:0% 50%; }
  }
    

  </style>

</head>
<body>
  <div class="d-flex">
    <!-- Content -->
    <div class="content w-100">

            <div>
                <!-- Theme switch -->
                <i class="fa-solid fa-circle-half-stroke theme-toggle me-3" onclick="toggleTheme()"></i>

            </div>
        </div>
    </div>      
  <div class="login-card">
    
    <img src="/static/logo.png" class="login-logo">
    <h4 class="login-title">تسجيل الدخول</h4>

    {% if error %}
      <div class="alert alert-danger text-center">{{ error }}</div>
    {% endif %}

    <form method="POST">
      
      <div class="mb-3">
        <label class="form-label">اسم المستخدم</label>
        <input class="form-control" name="username" required>
      </div>

      <div class="mb-3 password-wrapper">
        <label class="form-label">كلمة المرور</label>
        <input type="password" class="form-control" name="password" id="pass-field" required>
        <i class="fa fa-eye toggle-pass" id="togglePass"></i>
      </div>

      <button class="btn btn-primary btn-login">دخول</button>

    </form>

  </div>
    <div id="loading" class="loading-spinner d-none">
    <div class="spinner-border text-primary"></div>
    <p>جاري التحقق...</p>
  </div>

  <script>
    // Show / Hide Password
    const passField = document.getElementById("pass-field");
    const toggle = document.getElementById("togglePass");

    toggle.onclick = () => {
      if (passField.type === "password") {
        passField.type = "text";
        toggle.classList.replace("fa-eye","fa-eye-slash");
      } else {
        passField.type = "password";
        toggle.classList.replace("fa-eye-slash","fa-eye");
      }
    };
    /* Theme Auto + Manual Switching */
    function applyStoredTheme() {
        let theme = localStorage.getItem("theme");
        if (!theme) {
            // auto detect
            theme = window.matchMedia("(prefers-color-scheme: dark)").matches ? "dark" : "light";
        }
        document.documentElement.setAttribute("data-theme", theme);
    }

    function toggleTheme() {
        let current = document.documentElement.getAttribute("data-theme");
        let newTheme = current === "light" ? "dark" : "light";
        document.documentElement.setAttribute("data-theme", newTheme);
        localStorage.setItem("theme", newTheme);
    }

    applyStoredTheme();

    document.querySelector("form").onsubmit = () => {
    document.getElementById("loading").classList.remove("d-none");
};

  </script>

</body>
</html>
