{% extends 'base.html' %}
{% block content %}

<div class="fade-in-up">

  <!-- Ø¹Ù†ÙˆØ§Ù† -->
  <h3 class="fw-bold mb-4">ğŸ” Ø¨Ø­Ø« ÙˆÙÙ„ØªØ±Ø© Ø§Ù„ØªÙ‚Ø§Ø±ÙŠØ±</h3>

  <!-- FORM -->
  <div class="card shadow-sm border-0 p-4 mb-4">
    <form method="POST" class="row g-3">

      <div class="col-md-3">
        <label class="fw-bold">Ø§Ù„Ù…ÙˆÙ‚Ø¹</label>
        <select name="site_id" class="form-select stylish-input">
          <option value="">Ø§Ù„ÙƒÙ„</option>
          {% for s in sites %}
          <option value="{{ s.site_id }}">{{ s.site_name }}</option>
          {% endfor %}
        </select>
      </div>

      <div class="col-md-3">
        <label class="fw-bold">Ø§Ù„Ù…Ù‚Ø§ÙˆÙ„</label>
        <select name="contractor_id" class="form-select stylish-input">
          <option value="">Ø§Ù„ÙƒÙ„</option>
          {% for c in contractors %}
          <option value="{{ c.contractor_id }}">{{ c.contractor_name }}</option>
          {% endfor %}
        </select>
      </div>

      <div class="col-md-3">
        <label class="fw-bold">Ø§Ù„Ù…Ù‡Ù†Ø¯Ø³</label>
        <select name="engineer_id" class="form-select stylish-input">
          <option value="">Ø§Ù„ÙƒÙ„</option>
          {% for e in engineers %}
          <option value="{{ e.user_id }}">{{ e.fullname }}</option>
          {% endfor %}
        </select>
      </div>

      <div class="col-md-3">
        <label class="fw-bold">Ù…Ù† ØªØ§Ø±ÙŠØ®</label>
        <input type="date" name="date_from" class="form-control stylish-input">
      </div>

      <div class="col-md-3">
        <label class="fw-bold">Ø¥Ù„Ù‰ ØªØ§Ø±ÙŠØ®</label>
        <input type="date" name="date_to" class="form-control stylish-input">
      </div>

      <div class="col-md-3 d-grid">
        <button class="btn btn-primary stylish-btn mt-4">Ø¨Ø­Ø«</button>
      </div>

    </form>
  </div>

  <!-- Ø§Ù„Ù†ØªØ§Ø¦Ø¬ -->
  <h4 class="mb-3">ğŸ“„ Ø§Ù„Ù†ØªØ§Ø¦Ø¬</h4>

  {% if reports %}
  <div class="row" id="resultsContainer">

    {% for r in reports %}
    <div class="col-md-6 col-lg-4 fade-in-up">
      <div class="report-card shadow-sm border-0 hover-up mb-4">

        <div class="p-3">
          <h5 class="fw-bold text-primary">{{ r.title }}</h5>

          <p class="small text-muted mb-1">
            Ø§Ù„Ù…ÙˆÙ‚Ø¹: <strong>{{ r.site_name }}</strong>
          </p>

          <p class="small text-muted mb-1">
            Ø§Ù„Ù…Ù‚Ø§ÙˆÙ„: <strong>{{ r.contractor_name or 'â€”' }}</strong>
          </p>

          <p class="small text-muted mb-1">
            Ø§Ù„Ù…Ù‡Ù†Ø¯Ø³: <strong>{{ r.engineer_name }}</strong>
          </p>

          <p class="small text-muted">
            {{ r.date_created }}
          </p>

          <div class="mt-2 d-flex justify-content-between">
            <a href="/reports/view/{{ r.report_id }}" class="btn btn-sm btn-outline-info shadow-sm">
              ğŸ‘ Ø¹Ø±Ø¶
            </a>
            <a href="/report/{{ r.report_id }}/pdf" class="btn btn-sm btn-success shadow-sm">
              ğŸ“„ PDF
            </a>
          </div>

        </div>
      </div>
    </div>
    {% endfor %}

  </div>

  {% else %}
  <div class="alert alert-warning text-center">Ù„Ø§ ØªÙˆØ¬Ø¯ Ù†ØªØ§Ø¦Ø¬ Ù…Ø·Ø§Ø¨Ù‚Ø© Ù„Ù„Ø¨Ø­Ø«.</div>
  {% endif %}

</div>


<style>
/******** Animations *********/
.fade-in-up { animation: fadeInUp .6s ease; }
@keyframes fadeInUp {
  from { opacity:0; transform: translateY(20px); }
  to   { opacity:1; transform: translateY(0); }
}

/******** Cards *********/
.report-card {
  background: var(--bs-body-bg);
  border-right: 4px solid var(--bs-primary);
  border-radius: 10px;
  transition: 0.25s ease-in-out;
}
.hover-up:hover {
  transform: translateY(-6px);
  box-shadow: 0 10px 22px rgba(0,0,0,0.15);
}

/******** Form Enhancements *********/
.stylish-input {
  border-radius: 8px;
  padding: 10px;
  transition: 0.2s ease;
}
.stylish-input:focus {
  box-shadow: 0 0 0 3px rgba(13,110,253,.25);
}

.stylish-btn {
  height: 48px;
  border-radius: 10px;
  font-size: 17px;
  transition: 0.25s;
}
.stylish-btn:hover {
  background: #0b5ed7;
  transform: scale(1.03);
}

</style>

{% endblock %}
